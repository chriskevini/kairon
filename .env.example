# Kairon Environment Variables
# Copy this file to .env and fill in your actual values
# DO NOT commit the actual .env file to git!

# =============================================================================
# Docker Containers
# =============================================================================
CONTAINER_N8N=n8n-docker-caddy-n8n-1
CONTAINER_DB=postgres-db

# =============================================================================
# Database Configuration
# =============================================================================
# Database host and port (used by scripts/db/test-migration.sh)
DB_HOST=localhost
DB_PORT=5432
DB_USER=n8n_user
DB_NAME=kairon

# =============================================================================
# Backup Configuration
# =============================================================================
# Directory for local database backups (on server)
BACKUP_DIR=/root/kairon-backups

# rclone configuration for off-site backup (Google Drive, S3, etc.)
# Configure in ~/.config/rclone/rclone.conf
RCLONE_REMOTE_NAME=gdrive
RCLONE_REMOTE_PATH=kairon-backups

# Notification settings (ntfy.sh for backup status)
# Create topic at https://ntfy.sh
NTFY_TOPIC=kairon-backups
NTFY_URL=https://ntfy.sh

# Backup retention settings
BACKUP_KEEP_HOURLY=24    # Keep last 24 hourly backups
BACKUP_KEEP_DAILY=7       # Keep last 7 daily backups
BACKUP_KEEP_WEEKLY=4      # Keep last 4 weekly backups

# =============================================================================
# n8n Configuration
# =============================================================================
# API key for n8n REST API (generate in n8n settings)
N8N_API_KEY=your-n8n-api-key-here

# n8n API URL (for production instance)
N8N_API_URL=http://localhost:5678

# n8n Domain (for constructing webhook URLs)
N8N_DOMAIN=your-n8n-domain.com

# Webhook Path (random string for security)
# Generate with: openssl rand -hex 16
WEBHOOK_PATH=your-random-webhook-path-here

# Constructed webhook URL (used by discord_relay.py)
N8N_WEBHOOK_URL=https://your-n8n-domain.com/webhook/your-random-webhook-path-here

# n8n Postgres Credential ID
# IMPORTANT: This is the credential ID that ALL workflows reference in their Postgres nodes.
# It is NOT a secret - it's just a reference ID that n8n uses to look up the actual credentials.
# 
# How it works:
#   - Dev: The credential ID is auto-created with dev database credentials (postgres/postgres)
#   - Prod: Use the production credential with this same ID for consistency
#   - The actual username/password are stored securely in n8n and differ between environments
# 
# Security Note: This ID is safe to commit to version control. It's like a foreign key reference,
# not the actual credential data. The real credentials are stored encrypted in n8n's database.
N8N_POSTGRES_CREDENTIAL_ID=GIpVtzgs3wiCmQBQ

# =============================================================================
# Dev Environment (for local testing with ./scripts/simple-deploy.sh dev)
# =============================================================================
# Owner account credentials for local dev n8n instance
# These are used to create the initial owner account and for API authentication
# Note: The email will be {N8N_DEV_USER}@example.com
N8N_DEV_USER=admin
N8N_DEV_PASSWORD=Admin123!

# Encryption key for local n8n (must be 32 characters)
N8N_ENCRYPTION_KEY=kairon-dev-encryption-key-32chars

# API key for dev n8n instance (recommended for automated deployments)
# Set this to avoid authentication prompts when running ./scripts/simple-deploy.sh dev
N8N_DEV_API_KEY=your-dev-n8n-api-key-here

# API URL for dev n8n (default: http://localhost:5679)
N8N_DEV_API_URL=http://localhost:5679

# SSH host for tunnel to dev server (if developing on a different machine)
# Leave empty if running directly on the server
# Example: myserver, user@myserver.com, my-ssh-alias
N8N_DEV_SSH_HOST=

# Dev database configuration (if different from prod)
DB_NAME=kairon_dev

# =============================================================================
# Discord Bot Configuration (for discord_relay.py)
# =============================================================================
DISCORD_BOT_TOKEN=your-discord-bot-token-here

# Discord IDs
DISCORD_GUILD_ID=your-guild-id
DISCORD_CHANNEL_ARCANE_SHELL=your-arcane-shell-channel-id
DISCORD_CHANNEL_KAIRON_LOGS=your-kairon-logs-channel-id
DISCORD_CHANNEL_OBSIDIAN_BOARD=your-obsidian-board-channel-id

# Discord webhook for monitoring alerts (optional)
DISCORD_KAIRON_LOGS_WEBHOOK=https://discord.com/api/webhooks/your-webhook-id/your-webhook-token

# =============================================================================
# LLM API Keys (for n8n workflows)
# =============================================================================
OPENROUTER_API_KEY=your-openrouter-api-key-here
